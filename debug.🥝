# a script for debugging and experimentation (and fun!)

src = fs::glob("kiwi/**/*").select(with (f) do !f.contains("httplib.h") end)
loc = 0

for file in src do
  loc += fs::readlines(file).size()
end

println "number of files: ${src.size()}"
println "lines of code:   ${loc}"

#println signal::SIGINT
#println signal::raise(signal::SIGTERM)
#println signal::send(6339, signal::SIGKILL)
#println signal::send(2411, signal::SIGKILL)

signal::trap(signal::SIGINT, with do
  println "trapped SIGINT"
end)

println "Signal trap registered. Waiting for 10 seconds."
task::create(with do
  task::sleep(10000)
end)
task::wait()