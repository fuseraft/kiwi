struct Item
  fn new(item_id = "", qty = 0)
    @data = {}
    @data.item_id = item_id
    @data.qty = qty
  end

  fn data()
    return @data
  end

  fn to_string()
    return @data.to_string()
  end
end

struct Warehouse
  fn new(name = "")
    @data = {}
    @data.name = name
    @data.items = {}
  end

  fn add_item(item)
    wh_items = @data.items
    item_data = item.data()
    if @data.items.has_key(item_data.item_id)
      wh_items[item_data.item_id].data().qty += item_data.qty
    else
      wh_items[item_data.item_id] = item
    end
  end

  fn data()
    return @data
  end

  fn to_string()
    string = [], wh_data = data()
    
    for item_id, item in wh_data.items do
      item_data = item.data()
      string.push("${wh_data.name}|${item_id}|${item_data.qty}")
    end
    
    return string.join("\n")
  end
end

wh = Warehouse.new("OKC")
wh.add_item(Item.new("A0001", 10))
wh.add_item(Item.new("A0001", 10))
wh.add_item(Item.new("A0002", 10))

println wh.to_string()