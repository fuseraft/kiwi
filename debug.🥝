/# a script for experimentation and debugging. #/

/# 

##################
# parser testing #
##################

fn greet(name)
  println name
end

a = "Hello, World!"
b = [1, 2, 3, ["a", "b"]]
c = b[0]
c += 1

greet(a)

a = {
  "a": true, 
  "b": {
    "c": [1, 2, {"key": 3}]
  }
}

a.x.set(0, a.x.get(2))
a = {}
a.x = 5
a.b.c = [1]
a.x = [1..5].size()
a = [1,2][0]

m = (1 + 2) ** 5
n = [1..m]
a = n[0:1:2]
b = n[0::2]
c = n[::-1]
d = n[1::]
e = n[48]
f = [1, 2, 3, [4, 5]][::-1]
g = [1..20][::2]
a = n < 5 ? 100 : 101
a += 1

say = with (text) do
  println text
end

say("hello")

for i, index in [1..50] do
  println i
end

for n in b do
  println n
end

while n < 5 do
  println "hello"
end

repeat 5 as i do
  println i
end

try
  println "First try"
catch (err)
  println "an error occurred: ${err}"
finally
  println "the end of first try!"
end

try
  println "Second try"
catch (err, msg)
  println "an error occurred: ${err} with message: ${msg}"
finally
  println "the end of second try!"
end

try
  println "Third try"
catch
  println "an error occurred"
finally
  println "the end of third try!"
end

try
  println "Fourth try"
catch
  println "an error occurred"
end

try
  println "Fifth try"
finally
  println "the end of fifth try!"
end

try
  println "Sixth try"
end

while n < 5 do
  try 
    println n
  end
end

if 1 < 5
  println "1 is < 5"
elsif 5 > 1
  println "5 is > 1"
elsif 4 > 1
  if 2 < 4
    println "woot"
  end
else
  if 'a' < 'b'
    println "foobar"
  else
    println "blah"
  end
end

if 1 < 5
  if 2 < 3
    if 4 < 6 
      println "blah"
    end 
  end 
end

import "hello"

package pkg_name 
  home("kiwi")

  fn method_1()
    println "method 1"
  end

  fn method_2(a)
    println "method 2: ${a}"
  end

  fn method_3(a)
    throw "not a number" when !a.is_a(Integer) && !a.is_a(Double)
    return a * 3
  end
end

export "pkg_name"

case number
  when 0 
    println "zero"
  when 1
    println "one"
  else
    println "none"
end

case 
  when 1 < n
    println "1 is less than n"
  when 1 < m
    println "1 is less than m"
  else
    println "n and m are less than 1"
end
#/

/#

#######################
# interpreter testing #
#######################

m = 5
n = [{"a": m}] * m
println n

a = 11
a /= 3.
println a

n = 1
m = 1

if n < m
  println "n is less than m"
  if n < 1
    println "n is less than 1"
  elsif n < 2
    println "n is less than 2"
  else
    println "n is greater than or equal to 2"
  end
elsif n == m
  println "n is equal to m"
  n -= 1
  if n < 1
    println "n is less than 1"
  elsif n < 2
    println "n is less than 2"
  else
    println "n is greater than or equal to 2"
  end
else
  println "n is greater than m"
end

println n

for i in [1..6] do
  case i
    when 1 println "one"
    when 2 println "two"
    when 3 println "three"
    when 4 println "four"
    when 5 println "five"
    else println "merp"
  end
end

n = 0
while n < 5 do
  println n
  n += 1
end

try
  repeat 5 as i do
    println i / 0
  end
  
  println i
catch (err, msg)
  println err
  println msg
finally
  println "yay"
end

println "foobar"
println i

fn add(n, m = 0)
  println "n is " + n
  println "m is " + m
  println n + m
end

add(5, 4)

println "hello".chars()
println __random__(1, 100)
#/